obj-y += helper.o cpu.o gdbstub.o xsave_helper.o cpu-dump.o xcc-hw.o

accel-obj-$(CONFIG_TCG) += accel-tcg-target.mo
accel-tcg-target.mo-objs += translate.o
accel-tcg-target.mo-objs += bpt_helper.o cc_helper.o excp_helper.o fpu_helper.o
accel-tcg-target.mo-objs += int_helper.o mem_helper.o misc_helper.o mpx_helper.o
accel-tcg-target.mo-objs += seg_helper.o smm_helper.o svm_helper.o
accel-tcg-target.mo-objs += helper-tcg.o xcc-tcg.o

obj-$(call lnot,$(CONFIG_KVM)) += kvm-stub.o
ifeq ($(CONFIG_SOFTMMU),y)
obj-y += machine.o arch_memory_mapping.o arch_dump.o monitor.o
obj-$(CONFIG_KVM) += kvm.o
obj-$(CONFIG_HYPERV) += hyperv.o
obj-$(call lnot,$(CONFIG_HYPERV)) += hyperv-stub.o
ifeq ($(CONFIG_WIN32),y)
obj-$(CONFIG_HAX) += hax-all.o hax-mem.o hax-windows.o
endif
ifeq ($(CONFIG_POSIX),y)
obj-$(CONFIG_HAX) += hax-all.o hax-mem.o hax-posix.o
endif
obj-$(CONFIG_HVF) += hvf/
obj-$(CONFIG_WHPX) += whpx-all.o
endif
obj-$(CONFIG_SEV) += sev.o
obj-$(call lnot,$(CONFIG_SEV)) += sev-stub.o
